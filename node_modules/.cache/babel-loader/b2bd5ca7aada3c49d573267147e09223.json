{"remainingRequest":"D:\\webproject\\node_modules\\babel-loader\\lib\\index.js!D:\\webproject\\src\\core\\directives\\action.js","dependencies":[{"path":"D:\\webproject\\src\\core\\directives\\action.js","mtime":1587193627672},{"path":"D:\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\webproject\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKLyoqDQogKiBBY3Rpb24g5p2D6ZmQ5oyH5LukDQogKiDmjIfku6TnlKjms5XvvJoNCiAqICAtIOWcqOmcgOimgeaOp+WItiBhY3Rpb24g57qn5Yir5p2D6ZmQ55qE57uE5Lu25LiK5L2/55SoIHYtYWN0aW9uOlttZXRob2RdICwg5aaC5LiL77yaDQogKiAgICA8aS1idXR0b24gdi1hY3Rpb246YWRkID7mt7vliqDnlKjmiLc8L2EtYnV0dG9uPg0KICogICAgPGEtYnV0dG9uIHYtYWN0aW9uOmRlbGV0ZT7liKDpmaTnlKjmiLc8L2EtYnV0dG9uPg0KICogICAgPGEgdi1hY3Rpb246ZWRpdCBAY2xpY2s9ImVkaXQocmVjb3JkKSI+5L+u5pS5PC9hPg0KICoNCiAqICAtIOW9k+WJjeeUqOaIt+ayoeacieadg+mZkOaXtu+8jOe7hOS7tuS4iuS9v+eUqOS6huivpeaMh+S7pOWImeS8muiiq+makOiXjw0KICogIC0g5b2T5ZCO5Y+w5p2D6ZmQ6LefIHBybyDmj5DkvpvnmoTmqKHlvI/kuI3lkIzml7bvvIzlj6rpnIDopoHpkojlr7nov5nph4znmoTmnYPpmZDov4fmu6Tov5vooYzkv67mlLnljbPlj68NCiAqDQogKiAgQHNlZSBodHRwczovL2dpdGh1Yi5jb20vc2VuZHlhL2FudC1kZXNpZ24tcHJvLXZ1ZS9wdWxsLzUzDQogKi8KCnZhciBhY3Rpb24gPSBWdWUuZGlyZWN0aXZlKCdhY3Rpb24nLCB7CiAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkKGVsLCBiaW5kaW5nLCB2bm9kZSkgewogICAgdmFyIGFjdGlvbk5hbWUgPSBiaW5kaW5nLmFyZzsKICAgIHZhciByb2xlcyA9IHN0b3JlLmdldHRlcnMucm9sZXM7CiAgICB2YXIgZWxWYWwgPSB2bm9kZS5jb250ZXh0LiRyb3V0ZS5tZXRhLnBlcm1pc3Npb247CiAgICB2YXIgcGVybWlzc2lvbklkID0gZWxWYWwgaW5zdGFuY2VvZiBTdHJpbmcgJiYgW2VsVmFsXSB8fCBlbFZhbDsKICAgIHJvbGVzLnBlcm1pc3Npb25zLmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgaWYgKCFwZXJtaXNzaW9uSWQuaW5jbHVkZXMocC5wZXJtaXNzaW9uSWQpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAocC5hY3Rpb25MaXN0ICYmICFwLmFjdGlvbkxpc3QuaW5jbHVkZXMoYWN0aW9uTmFtZSkpIHsKICAgICAgICA7CiAgICAgICAgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKSB8fCAoZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7CiAgICAgIH0KICAgIH0pOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IGFjdGlvbjs="},{"version":3,"sources":["D:/webproject/src/core/directives/action.js"],"names":["Vue","store","action","directive","inserted","el","binding","vnode","actionName","arg","roles","getters","elVal","context","$route","meta","permission","permissionId","String","permissions","forEach","p","includes","actionList","parentNode","removeChild","style","display"],"mappings":";;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEA;;;;;;;;;;;;;;AAaA,IAAMC,MAAM,GAAGF,GAAG,CAACG,SAAJ,CAAc,QAAd,EAAwB;AACnCC,EAAAA,QAAQ,EAAE,kBAASC,EAAT,EAAaC,OAAb,EAAsBC,KAAtB,EAA6B;AACnC,QAAMC,UAAU,GAAGF,OAAO,CAACG,GAA3B;AACA,QAAMC,KAAK,GAAGT,KAAK,CAACU,OAAN,CAAcD,KAA5B;AACA,QAAME,KAAK,GAAGL,KAAK,CAACM,OAAN,CAAcC,MAAd,CAAqBC,IAArB,CAA0BC,UAAxC;AACA,QAAMC,YAAY,GAAIL,KAAK,YAAYM,MAAjB,IAA2B,CAACN,KAAD,CAA5B,IAAwCA,KAA7D;AACAF,IAAAA,KAAK,CAACS,WAAN,CAAkBC,OAAlB,CAA0B,UAAAC,CAAC,EAAI;AAC3B,UAAI,CAACJ,YAAY,CAACK,QAAb,CAAsBD,CAAC,CAACJ,YAAxB,CAAL,EAA4C;AACxC;AACH;;AACD,UAAII,CAAC,CAACE,UAAF,IAAgB,CAACF,CAAC,CAACE,UAAF,CAAaD,QAAb,CAAsBd,UAAtB,CAArB,EAAwD;AACpD;AAAEH,QAAAA,EAAE,CAACmB,UAAH,IAAiBnB,EAAE,CAACmB,UAAH,CAAcC,WAAd,CAA0BpB,EAA1B,CAAlB,KAAqDA,EAAE,CAACqB,KAAH,CAASC,OAAT,GAAmB,MAAxE;AACJ;AACJ,KAPD;AAQH;AAdkC,CAAxB,CAAf;AAiBA,eAAezB,MAAf","sourcesContent":["import Vue from 'vue'\r\nimport store from '@/store'\r\n\r\n/**\r\n * Action 权限指令\r\n * 指令用法：\r\n *  - 在需要控制 action 级别权限的组件上使用 v-action:[method] , 如下：\r\n *    <i-button v-action:add >添加用户</a-button>\r\n *    <a-button v-action:delete>删除用户</a-button>\r\n *    <a v-action:edit @click=\"edit(record)\">修改</a>\r\n *\r\n *  - 当前用户没有权限时，组件上使用了该指令则会被隐藏\r\n *  - 当后台权限跟 pro 提供的模式不同时，只需要针对这里的权限过滤进行修改即可\r\n *\r\n *  @see https://github.com/sendya/ant-design-pro-vue/pull/53\r\n */\r\nconst action = Vue.directive('action', {\r\n    inserted: function(el, binding, vnode) {\r\n        const actionName = binding.arg\r\n        const roles = store.getters.roles\r\n        const elVal = vnode.context.$route.meta.permission\r\n        const permissionId = (elVal instanceof String && [elVal]) || elVal\r\n        roles.permissions.forEach(p => {\r\n            if (!permissionId.includes(p.permissionId)) {\r\n                return\r\n            }\r\n            if (p.actionList && !p.actionList.includes(actionName)) {\r\n                ;(el.parentNode && el.parentNode.removeChild(el)) || (el.style.display = 'none')\r\n            }\r\n        })\r\n    }\r\n})\r\n\r\nexport default action\r\n"]}]}