{"remainingRequest":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\babel-loader\\lib\\index.js!D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\src\\components\\CountDown\\CountDown.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\src\\components\\CountDown\\CountDown.vue","mtime":1587193627639},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\WebStrom\\TestProject\\project\\06楼盘管理3\\webproject\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwoKLy8KLy8KLy8KLy8KZnVuY3Rpb24gZml4ZWRaZXJvKHZhbCkgewogIHJldHVybiB2YWwgKiAxIDwgMTAgPyAiMCIuY29uY2F0KHZhbCkgOiB2YWw7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ291bnREb3duJywKICBwcm9wczogewogICAgZm9ybWF0OiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiB1bmRlZmluZWQKICAgIH0sCiAgICB0YXJnZXQ6IHsKICAgICAgdHlwZTogW0RhdGUsIE51bWJlcl0sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgb25FbmQ6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGVUaW1lOiAnMCcsCiAgICAgIG9yaWdpblRhcmdldFRpbWU6IDAsCiAgICAgIGxhc3RUaW1lOiAwLAogICAgICB0aW1lcjogMCwKICAgICAgaW50ZXJ2YWw6IDEwMDAKICAgIH07CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCh0aW1lKSB7CiAgICAgIHZhciBob3VycyA9IDYwICogNjAgKiAxMDAwOwogICAgICB2YXIgbWludXRlcyA9IDYwICogMTAwMDsKICAgICAgdmFyIGggPSBNYXRoLmZsb29yKHRpbWUgLyBob3Vycyk7CiAgICAgIHZhciBtID0gTWF0aC5mbG9vcigodGltZSAtIGggKiBob3VycykgLyBtaW51dGVzKTsKICAgICAgdmFyIHMgPSBNYXRoLmZsb29yKCh0aW1lIC0gaCAqIGhvdXJzIC0gbSAqIG1pbnV0ZXMpIC8gMTAwMCk7CiAgICAgIHJldHVybiAiIi5jb25jYXQoZml4ZWRaZXJvKGgpLCAiOiIpLmNvbmNhdChmaXhlZFplcm8obSksICI6IikuY29uY2F0KGZpeGVkWmVybyhzKSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0VGltZSgpOwogICAgdGhpcy50aWNrKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0VGltZTogZnVuY3Rpb24gaW5pdFRpbWUoKSB7CiAgICAgIHZhciBsYXN0VGltZSA9IDA7CiAgICAgIHZhciB0YXJnZXRUaW1lID0gMDsKICAgICAgdGhpcy5vcmlnaW5UYXJnZXRUaW1lID0gdGhpcy50YXJnZXQ7CgogICAgICB0cnkgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGhpcy50YXJnZXQpID09PSAnW29iamVjdCBEYXRlXScpIHsKICAgICAgICAgIHRhcmdldFRpbWUgPSB0aGlzLnRhcmdldDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGFyZ2V0VGltZSA9IG5ldyBEYXRlKHRoaXMudGFyZ2V0KS5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIHRhcmdldCBwcm9wJyk7CiAgICAgIH0KCiAgICAgIGxhc3RUaW1lID0gdGFyZ2V0VGltZSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB0aGlzLmxhc3RUaW1lID0gbGFzdFRpbWUgPCAwID8gMCA6IGxhc3RUaW1lOwogICAgfSwKICAgIHRpY2s6IGZ1bmN0aW9uIHRpY2soKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgb25FbmQgPSB0aGlzLm9uRW5kOwogICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLmxhc3RUaW1lIDwgX3RoaXMuaW50ZXJ2YWwpIHsKICAgICAgICAgIGNsZWFyVGltZW91dChfdGhpcy50aW1lcik7CiAgICAgICAgICBfdGhpcy5sYXN0VGltZSA9IDA7CgogICAgICAgICAgaWYgKHR5cGVvZiBvbkVuZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBvbkVuZCgpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5sYXN0VGltZSAtPSBfdGhpcy5pbnRlcnZhbDsKCiAgICAgICAgICBfdGhpcy50aWNrKCk7CiAgICAgICAgfQogICAgICB9LCB0aGlzLmludGVydmFsKTsKICAgIH0KICB9LAogIGJlZm9yZVVwZGF0ZTogZnVuY3Rpb24gYmVmb3JlVXBkYXRlKCkgewogICAgaWYgKHRoaXMub3JpZ2luVGFyZ2V0VGltZSAhPT0gdGhpcy50YXJnZXQpIHsKICAgICAgdGhpcy5pbml0VGltZSgpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICB9Cn07"},{"version":3,"sources":["CountDown.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <span>{{ lastTime | format }}</span>\r\n</template>\r\n\r\n<script>\r\nfunction fixedZero(val) {\r\n    return val * 1 < 10 ? `0${val}` : val\r\n}\r\n\r\nexport default {\r\n    name: 'CountDown',\r\n    props: {\r\n        format: {\r\n            type: Function,\r\n            default: undefined\r\n        },\r\n        target: {\r\n            type: [Date, Number],\r\n            required: true\r\n        },\r\n        onEnd: {\r\n            type: Function,\r\n            default: () => ({})\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            dateTime: '0',\r\n            originTargetTime: 0,\r\n            lastTime: 0,\r\n            timer: 0,\r\n            interval: 1000\r\n        }\r\n    },\r\n    filters: {\r\n        format(time) {\r\n            const hours = 60 * 60 * 1000\r\n            const minutes = 60 * 1000\r\n\r\n            const h = Math.floor(time / hours)\r\n            const m = Math.floor((time - h * hours) / minutes)\r\n            const s = Math.floor((time - h * hours - m * minutes) / 1000)\r\n            return `${fixedZero(h)}:${fixedZero(m)}:${fixedZero(s)}`\r\n        }\r\n    },\r\n    created() {\r\n        this.initTime()\r\n        this.tick()\r\n    },\r\n    methods: {\r\n        initTime() {\r\n            let lastTime = 0\r\n            let targetTime = 0\r\n            this.originTargetTime = this.target\r\n            try {\r\n                if (Object.prototype.toString.call(this.target) === '[object Date]') {\r\n                    targetTime = this.target\r\n                } else {\r\n                    targetTime = new Date(this.target).getTime()\r\n                }\r\n            } catch (e) {\r\n                throw new Error('invalid target prop')\r\n            }\r\n\r\n            lastTime = targetTime - new Date().getTime()\r\n\r\n            this.lastTime = lastTime < 0 ? 0 : lastTime\r\n        },\r\n        tick() {\r\n            const { onEnd } = this\r\n\r\n            this.timer = setTimeout(() => {\r\n                if (this.lastTime < this.interval) {\r\n                    clearTimeout(this.timer)\r\n                    this.lastTime = 0\r\n                    if (typeof onEnd === 'function') {\r\n                        onEnd()\r\n                    }\r\n                } else {\r\n                    this.lastTime -= this.interval\r\n                    this.tick()\r\n                }\r\n            }, this.interval)\r\n        }\r\n    },\r\n    beforeUpdate() {\r\n        if (this.originTargetTime !== this.target) {\r\n            this.initTime()\r\n        }\r\n    },\r\n    beforeDestroy() {\r\n        clearTimeout(this.timer)\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n"],"sourceRoot":"src/components/CountDown"}]}